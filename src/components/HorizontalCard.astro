---
const { title, img, desc, url, badge, tags, target = "_blank", compact = false } = Astro.props;
import { Image } from "astro:assets";
const tag_url = url.split("/").slice(0, -1).join("/") + "/tag";
const cardClass = compact
  ? "rounded-lg bg-base-100 hover:shadow-md transition ease-in-out"
  : "rounded-lg bg-base-100 hover:shadow-xl transition ease-in-out hover:scale-[102%]";
const contentClass = compact
  ? "hero-content flex-col md:flex-row gap-3 p-4"
  : "hero-content flex-col md:flex-row";
const imageClass = compact
  ? "max-w-full md:max-w-[9rem] rounded-lg"
  : "max-w-full md:max-w-[13rem] rounded-lg";
const titleClass = compact ? "text-base font-bold" : "text-lg font-bold";
const descClass = compact ? "py-1 text-xs leading-snug" : "py-1 text-sm leading-snug";
const badgeClass = compact ? "badge badge-secondary badge-sm mx-2" : "badge badge-secondary badge-sm mx-2";
---

<div class={cardClass}>
  <a href={url} target={target}>
    <div class={contentClass}>
      {
        img && (
          typeof img === 'string' ? (
            <img
              src={img}
              width="750"
              height="422"
              alt={title}
              class={imageClass}
            />
          ) : (
            <Image
              src={img}
              width={750}
              height={422}
              format="webp"
              alt={title}
              class={imageClass}
            />
          )
        )
      }
      <div class="grow w-full">
        <h1 class={titleClass}>
          {title}
          {badge && <div class={badgeClass}>{badge}</div>}
        </h1>
        <p class={descClass}>{desc}</p>
        <div class="card-actions justify-end">
          {
            tags &&
              tags.map((tag) => (
                <a href={`${tag_url}/${tag}`} class="badge badge-outline badge-sm">
                  {tag}
                </a>
              ))
          }
        </div>
      </div>
    </div>
  </a>
</div>
